(function(t){function e(e){for(var i,a,o=e[0],c=e[1],l=e[2],u=0,h=[];u<o.length;u++)a=o[u],r[a]&&h.push(r[a][0]),r[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);d&&d(e);while(h.length)h.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],i=!0,o=1;o<s.length;o++){var c=s[o];0!==r[c]&&(i=!1)}i&&(n.splice(e--,1),t=a(a.s=s[0]))}return t}var i={},r={app:0},n=[];function a(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=i,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(s,i,function(e){return t[e]}.bind(null,i));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/assets/assets/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var d=c;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("cd49")},"0fe1":function(t,e,s){},"131f":function(t,e,s){},"15bb":function(t,e,s){"use strict";var i=s("0fe1"),r=s.n(i);r.a},"1ac0":function(t,e,s){"use strict";var i=s("9e37"),r=s.n(i);r.a},"1e8b":function(t,e){},3253:function(t,e,s){},3686:function(t,e,s){"use strict";var i=s("f769"),r=s.n(i);r.a},"42c7":function(t,e,s){},"45a3":function(t,e,s){"use strict";var i=s("7122"),r=s.n(i);r.a},"45f8":function(t,e,s){},"4c3a":function(t,e,s){"use strict";var i=s("45f8"),r=s.n(i);r.a},"4deb":function(t,e,s){},"681c":function(t,e,s){"use strict";var i=s("cd8d"),r=s.n(i);r.a},"6ae3":function(t,e,s){},"6dcf":function(t,e,s){"use strict";var i=s("a13b"),r=s.n(i);r.a},7122:function(t,e,s){},"79d6":function(t,e,s){"use strict";var i=s("4deb"),r=s.n(i);r.a},8753:function(t,e,s){},"8dee":function(t,e,s){"use strict";var i=s("d8fd"),r=s.n(i);r.a},"97fb":function(t,e,s){"use strict";var i=s("131f"),r=s.n(i);r.a},"98c9":function(t,e,s){"use strict";var i=s("b3cc"),r=s.n(i);r.a},"9e37":function(t,e,s){},a13b:function(t,e,s){},a1e4:function(t,e,s){},a79f:function(t,e,s){"use strict";var i=s("8753"),r=s.n(i);r.a},b3cc:function(t,e,s){},b7d9:function(t,e,s){"use strict";var i=s("3253"),r=s.n(i);r.a},c1c3:function(t,e,s){},c253:function(t,e,s){"use strict";var i=s("e157"),r=s.n(i);r.a},c553:function(t,e,s){"use strict";var i=s("d83e"),r=s.n(i);r.a},cd49:function(t,e,s){"use strict";s.r(e);var i=s("2b0e"),r=s("2f62");const n={setSrc:"setScreenSrc",setWidth:"setScreenWidth",setHeight:"setScreenHeight",setPoints:"setScreenPoints",setSquares:"setScreenSquares",setInitState:"setScreenInitState",setActiveTool:"setScreenActiveTool",setHistoryPoints:"setScreenHistoryPoints",setHistorySquares:"setScreenHistorySquares"},a={setSrc:"setScreenSrc",addPoint:"addScreenPoint",addSquare:"addScreenSquare",clearPoints:"clearScreenPoints",clearSquares:"clearScreenSquares",clearHistoryPoints:"clearScreenHistoryPoints",clearHistorySquares:"clearScreenHistorySquares"};var o;(function(t){t[t["circle"]=0]="circle",t[t["square"]=1]="square",t[t["pencil"]=2]="pencil"})(o||(o={}));let c={src:"",width:0,heigth:0,points:[],squares:[],historyPoints:[],historySquares:[],activeTool:o.pencil};var l={state:c,mutations:{[n.setWidth]:(t,e)=>{t.width=e},[n.setInitState]:(t,e)=>{Object.assign(t,e)},[n.setHeight]:(t,e)=>{t.heigth=e},[n.setSrc]:(t,e)=>{t.src=e},[n.setPoints]:(t,e)=>{t.points=e},[n.setSquares]:(t,e)=>{t.squares=e},[n.setHistorySquares]:(t,e)=>{t.historySquares=e},[n.setHistoryPoints]:(t,e)=>{t.historyPoints=e},[n.setActiveTool]:(t,e)=>{t.activeTool=e}},getters:{getScreenSrc:t=>t.src,getScreenWidth:t=>t.width,getScreenHeight:t=>t.height,getScreenPoints: t=>t.points,getScreenSquares: t=>t.squares,getScreenActiveTool: t=>t.activeTool,getScreenHistoryPoints: t=>t.historyPoints,getScreenHistorySquares: t=>t.historySquares},actions:{[a.addPoint]:(t, e)=>{return new Promise(s=>{let i=t.state.points.concat([e]);t.commit(n.setPoints,i);let r=t.state.historyPoints.concat([e]);t.commit(n.setHistoryPoints,r),s()})},[a.setSrc]:(t, e)=>{return new Promise(s=>{t.commit(n.setSrc,e),Promise.all([t.dispatch(a.clearPoints),t.dispatch(a.clearSquares),t.dispatch(a.clearHistoryPoints),t.dispatch(a.clearHistorySquares)]).then(()=>{s()})})},[a.addSquare]:(t,e)=>{return new Promise(s=>{let i=t.state.squares.concat([e]);t.commit(n.setSquares,i);let r=t.state.historySquares.concat([e]);t.commit(n.setHistorySquares,r),s()})},[a.clearPoints]:t=>{return new Promise(e=>{t.commit(n.setPoints,[]),e()})},[a.clearSquares]:t=>{return new Promise(e=>{t.commit(n.setSquares,[]),e()})},[a.clearHistoryPoints]:t=>{return new Promise(e=>{t.commit(n.setHistoryPoints,[]),e()})},[a.clearHistorySquares]:t=>{return new Promise(e=>{t.commit(n.setHistorySquares,[]),e()})}}};const d={setInitState:"setClientInitState",setClient:"setClientClient"},u={clearClient:"clearClient"};let h={model:void 0};var m={state:h,mutations:{[d.setInitState]:(t,e)=>{Object.assign(t,e)},[d.setClient]:(t,e)=>{t.model=e}},getters:{getClient:t=>t.model},actions:{[u.clearClient]:t=>{return new Promise((e,s)=>{t.commit(d.setClient,void 0)})}}};const g=t=>{let e=localStorage.getItem("state");if(e){let s=JSON.parse(e),i=s.screen,r=s.client;t.commit(n.setInitState,i||{}),t.commit(d.setInitState,r||{})}t.subscribe((t,e)=>{localStorage.setItem("state",JSON.stringify(e))})};i["default"].use(r["a"]);const p=new r["a"].Store({modules:{screen:l,client:m},plugins:[g]});var f=p,v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"app"},[s("modal",{staticClass:"bug-report-tool-modal",attrs:{name:"bug-report-tool",width:"100%",height:"100%"},on:{closed:t.cleanStore}},[s("bug-report-tool")],1),s("modal",{staticClass:"authorization-modal",attrs:{name:"authorization",width:"100%",height:"100%"}},[s("authorization")],1),s("notifications",{attrs:{group:"success-message"}}),s("application-navigation")],1)},b=[],w=s("9ab4"),S=s("2fe1"),x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"application-navigation"},[s("div",{staticClass:"application-navigation__buttons"},[t.client?s("i",{staticClass:"application-navigation__button fas fa-camera",on:{click:t.showCanvasModal}}):t._e(),s("i",{staticClass:"application-navigation__button fa-user",class:[t.client?"fas":"far"],on:{click:t.showAuthorizationModal}}),s("i",{staticClass:"application-navigation__button fas fa-list-ul",on:{click:t.showListMenu}})])])},y=[];let _=class extends i["default"]{get client(){return this.$store.getters.getClient}showCanvasModal(){this.client?this.$modal.show("bug-report-tool"):this.showAuthorizationModal()}showAuthorizationModal(){this.$modal.show("authorization")}showListMenu(){}};_=w["a"]([Object(S["b"])({})],_);var C=_,P=C,O=(s("c253"),s("2877")),E=Object(O["a"])(P,x,y,!1,null,"94c3d0c2",null),j=E.exports,T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bug-report-tool"},[s("loader",{attrs:{loading:t.loading}}),Object.keys(t.schema).length?s("form-builder",{ref:"form",attrs:{schema:t.schema,model:t.model,"form-error":t.formError}}):t._e()],1)},$=[],q=s("4309"),k=s.n(q);const H={options:t=>{return Object.assign({validateAfterLoad:!1,validateAfterChanged:!0},t)},description:(t="description",e={})=>{return Object.assign({type:"textArea",model:t},e)},submit:(t,e={})=>{return Object.assign({type:"submit",buttonText:"Отправить",validateBeforeSubmit:!0,onSubmit:t},e)},button:(t,e,s={})=>{return Object.assign({type:"cbutton",text:t,onClick:e,class:"button__orange"},s)},imageWorker:(t={})=>{return Object.assign({model:"image",type:"image-worker"},t)},email:(t={})=>{return Object.assign({type:"input",inputType:"text",label:"Email",model:"email",placeholder:"Email",required:!0,validator:q["validators"].email},t)},name:(t={})=>{return Object.assign({type:"input",inputType:"text",label:"Ім'я",model:"name",placeholder:"Ім'я",required:!0,min:2,max:24,validator:[q["validators"].string]},t)},dynamicFieldList:(t,e=0,s={})=>{return Object.assign({model:t,type:"dynamic-fields-list",text:"Описание бага",count:e},s)}};var L=s("4a35");class I{}class A extends I{constructor(t){super(),this.meta=t.meta,this.image=t.image,this.description=t.description,t.errors&&(this.errors=t.errors)}}const M={controller:"bugReport",sufix:"/"};var R=M,D=s("bc3a"),U=s.n(D),F=s("7317"),W=s.n(F);class B{post(t,e=null){let s=this.getCSRFToken();s&&Object.assign(e,s);let i=W()(e);return this.send(t,B.POST_METHOD,{data:i})}get(t,e=null){let s=this.getCSRFToken();return s&&Object.assign(e,s),this.send(t,B.GET_METHOD,{params:e})}put(t,e=null){let s=this.getCSRFToken();return s&&Object.assign(e,s),this.send(t,B.PUT_METHOD,{data:e})}delete(t,e=null){let s=this.getCSRFToken();return s&&Object.assign(e,s),this.send(t,B.DELETE_METHOD,{data:e})}send(t,e,s){return new Promise((i,r)=>{let n=`/${R.controller}/${t}${R.sufix}`,a={headers:{"Content-Type":"post"===e?"multipart/form-data;charset=UTF-8":"applocation/json;charset=UTF-8"},url:n,responseType:"json",method:e};s&&Object.assign(a,s),U()(a).then(t=>{let e=[B.OK,B.CREATED,B.DELETED];e.some(e=>t.status===e)?i(t.data):r(t.data)}).catch(t=>{let e=t.response,s=e.status;s&&s===B.UNAUTHORIZED&&r({code:s,message:"Авторизуйся і спробуйте ще раз."});let i=t.response.message;i||(i=t.response.data.message),i||(i=t.response.data[0].message),i||(i="Виникла помилка. Повторіть спробу пізніше."),r({code:s,message:i})})})}getCSRFToken(){let t=document.querySelector('meta[name="csrf-token"]'),e=document.querySelector('meta[name="csrf-param"]');return t&&e?{[e.content]:t.content}:null}}B.OK=200,B.CREATED=201,B.DELETED=204,B.BAD_REQUEST=400,B.UNAUTHORIZED=401,B.FORBIDDEN=403,B.NOT_FOUND=404,B.VALIDATION_FAILED=422,B.INTERNAL_SERVER_ERROR=500,B.SERVICE_UNAVAILABLE=503,B.POST_METHOD="post",B.GET_METHOD="get",B.PUT_METHOD="put",B.DELETE_METHOD="delete";var X=new B;class Y{getAll(t){return new Promise((e,s)=>{const i=t?t.getProps():{};X.get(this.action,i).then(t=>{e(this.createCollection(t))},s)})}create(t={}){return new Promise((e,s)=>{X.post(this.action,t).then(t=>{e(this.createModel(t))},s)})}update(t,e){return new Promise((s,i)=>{X.put(`${this.action}/${t}`,e).then(t=>{s(this.createModel(t))},i)})}deleteById(t){return new Promise((e,s)=>{X.delete(`${this.action}/${t}`).then(e,s)})}deleteByAttributes(t){return new Promise((e,s)=>{X.delete(this.action,t.getProps()).then(e,s)})}findById(t,e){return new Promise((s,i)=>{const r=e?e.getProps():{};X.get(`${this.action}/${t}`,r).then(t=>{try{s(this.createModel(t))}catch(e){i()}},i)})}findByAttributes(t){return new Promise((e,s)=>{X.get(this.action,t.getProps()).then(t=>{e(this.createCollection(t))},s)})}}class z{constructor(){this.entities=[]}setEntity(t){this.entities.push(this.createModel(t))}setEntities(t){this.entities=t.map(t=>this.createModel(t))}isEmpty(){return!this.entities.length}getEntities(){return this.entities}}class N extends z{createModel(t){return new A(t)}}class V extends Y{constructor(){super(...arguments),this.action="issue"}createModel(t){return new A(t)}createCollection(t){let e=new N;return e.setEntities(t),e}}var J=s("60a3");let G=class extends i["default"]{constructor(){super(...arguments),this.formError="",this.count=0,this.loading=!1,this.model={description:"",errors:[]}}get screenHistorySquares(){return this.$store.getters.getScreenHistorySquares}updateSchema(){this.generateSchema()}beforeMount(){this.generateSchema()}generateSchema(){let t=[H.description("description",{label:"Описание ошибки",placeholder:"Описание ошибки"}),H.submit(this.submitForm)];this.screenHistorySquares.length&&t.unshift(H.dynamicFieldList("errors",this.screenHistorySquares.length)),this.schema={groups:[{legend:"Image",styleClasses:"form-custom-group image-worker",fields:[H.imageWorker()]},{legend:"Description",styleClasses:"form-custom-group description",fields:t}],loading:!1},this.$forceUpdate()}submitForm(){let t=document.getElementById("bg-canvas");t&&(this.loading=!0,t.toBlob(t=>{const e=Object(L["detect"])();if(!e||!t)return;let s=new File([t],"image.png"),i={description:this.model.description,image:s,meta:{href:window.location.href,viewportHeight:window.innerHeight,viewportWidth:window.innerWidth,scrollX:window.scrollX,scrollY:window.scrollY,browser:e.name,browserVersion:e.version,os:e.os,source:window.navigator.userAgent}};if(this.model.errors.length){let t={};this.model.errors.forEach(e=>{t[e.index.toString()]=e}),i.errors=t}let r=new A(i),n=new V;n.create(r).then(t=>{this.$modal.hide("bug-report-tool"),this.$notify({group:"success-message",type:"success",title:"Успех!",text:`Правка "${this.model.description.trim()}" была успешно сохранена!`}),this.loading=!1},t=>{this.formError=t.message,this.loading=!1})}))}};w["a"]([Object(J["a"])("screenHistorySquares")],G.prototype,"updateSchema",null),G=w["a"]([Object(S["b"])({})],G);var K,Q=G,Z=Q,tt=(s("97fb"),s("15bb"),Object(O["a"])(Z,T,$,!1,null,"1a764acc",null)),et=tt.exports,st=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"authorization"},[t.client?s("div",{staticClass:"authorization__inform"},[s("div",{staticClass:"authorization__intorm-text simple-text"},[t._v("Ты уже авторизовался в системе, "+t._s(t.client.name)+".")]),s("div",{staticClass:"authorization__button button button__black",on:{click:t.clearUser}},[t._m(0)])]):s("div",{staticClass:"authorization__form"},[s("div",{staticClass:"authorization__form-text simple-text"},[t._v("Авторизация")]),s("form-builder",{ref:"form",attrs:{schema:t.schema,model:t.model,"form-error":t.formError}})],1)])},it=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"button_wrap"},[s("a",{staticClass:"button_link",attrs:{href:"javascript:void(0);"}},[s("div",{staticClass:"button_text"},[t._v("Выйти")])])])}];class rt extends I{constructor(t){super(),this.id=t.id,this.email=t.email,this.name=t.name}}class nt extends z{createModel(t){return new rt(t)}}class at extends Y{constructor(){super(...arguments),this.action="user"}createModel(t){return new rt(t)}createCollection(t){let e=new nt;return e.setEntities(t),e}}(function(t){t["DESC"]="desc",t["ASC"]="asc"})(K||(K={}));class ot{constructor(t){t.perPage&&(this.perPage=t.perPage),t.page&&(this.page=t.page),t.expand&&(this.expand=t.expand),t.condition&&(this.condition=t.condition),t.mixins&&(this.mixins=t.mixins),t.order&&(this.order=t.order),t.groupBy&&(this.groupBy=t.groupBy)}getProps(){let t={};if(this.expand&&Object.defineProperty(t,"expand",{writable:!0,enumerable:!0,configurable:!0,value:this.expand.join(",")}),this.page&&Object.defineProperty(t,"page",{writable:!0,enumerable:!0,configurable:!0,value:this.page}),this.mixins&&Object.defineProperty(t,"mixins",{writable:!0,enumerable:!0,configurable:!0,value:this.mixins.join(",")}),this.groupBy&&Object.defineProperty(t,"groupBy",{writable:!0,enumerable:!0,configurable:!0,value:this.groupBy.join(",")}),this.perPage&&Object.defineProperty(t,"perPage",{writable:!0,enumerable:!0,configurable:!0,value:this.perPage}),this.order){let e="";if("random"===this.order)e=this.order;else{let t=this.order.type===K.ASC?"":"-";e=t+this.order.field}Object.defineProperty(t,"sort",{writable:!0,enumerable:!0,configurable:!0,value:e})}return this.condition&&Object.keys(this.condition).length&&Object.defineProperty(t,"filter",{writable:!0,enumerable:!0,configurable:!0,value:this.condition}),t}}let ct=class extends i["default"]{constructor(){super(...arguments),this.model={email:""},this.formError="",this.schema={fields:[H.email(),H.submit(this.loginUser,{buttonText:"Авторизоваться"})]}}get client(){return this.$store.getters.getClient}loginUser(){let t=new at,e=new ot({condition:this.model});t.findByAttributes(e).then(t=>{if(t.isEmpty())return;let e=t.getEntities()[0];this.$store.commit(d.setClient,e),this.$modal.hide("authorization")},t=>{this.formError=t})}clearUser(){this.$store.dispatch(u.clearClient)}};ct=w["a"]([Object(S["b"])({})],ct);var lt=ct,dt=lt,ut=(s("4c3a"),Object(O["a"])(dt,st,it,!1,null,"2d45e086",null)),ht=ut.exports;let mt=class extends i["default"]{get client(){return this.$store.getters.getClient}showModal(){this.client?this.$modal.show("bug-report-tool"):this.$modal.show("authorization")}cleanStore(){this.$store.dispatch(a.setSrc,"")}beforeMount(){let t=["Q".charCodeAt(0),"W".charCodeAt(0),"E".charCodeAt(0)],e={};document.onkeydown=s=>{s=s||window.event,Object.assign(e,{[s.keyCode]:!0});for(var i=0;i<t.length;i++)if(!e[t[i]])return;e={},this.showModal()},document.onkeyup=function(t){t=t||window.event,delete e[t.keyCode]}}};mt=w["a"]([Object(S["b"])({components:{"application-navigation":j,"bug-report-tool":et,authorization:ht}})],mt);var gt=mt,pt=gt,ft=(s("c553"),s("e5d6"),s("79d6"),Object(O["a"])(pt,v,b,!1,null,"9311ca78",null)),vt=ft.exports,bt=s("1881"),wt=s.n(bt),St=(s("92bd"),s("ee98")),xt=s.n(St);s("c1c3"),s("1e8b");const yt={fieldIsRequired:"Поле обов'язкове для заповнення",invalidFormat:"Невірний формат данних",fieldIsPasswords:"Значення в полях мають співпадати",numberTooSmall:"Число занадто мале. Мінімум:&nbsp;{0}",numberTooBig:"Число занадто велике. Максимум:&nbsp;{0}",invalidNumber:"Невірне число",invalidInteger:"Поле має містити лише цифри",textTooSmall:"Поле має містити мінімум {1} символи",textTooBig:"Поле має містити не більше ніж {1} символів.Довжина тексту занадто велика",thisNotText:"Це не текст",thisNotArray:"Це не массив",currentDateError:"Зазначена дата некоректна",selectMinItems:"Оберіть щонайменше {0} елементів",selectMaxItems:"Оберіть щонайбільше {0} елементів",invalidDate:"Обрана дата некоректна",dateIsEarly:"Обрана дата некоректна. Обрана:&nbsp;{0}, мінімальна:&nbsp;{1}",dateIsLate:"Обрана дата некоректна. Обрана:&nbsp;{0}, максимальна:&nbsp;{1}",invalidEmail:"Неправильний формат електронної адреси",invalidURL:"Невірно вказана адресса",invalidCard:"Невірно вказаний номер карти",invalidCardNumber:"Невірно вказаний номер карти",invalidTextContainNumber:"Невірно вказаний текст. Текст не може містити числа або спеціальні символи",invalidTextContainSpec:"Невірно вказаний текст. Текст не може містити спеціальні символи",requirePassword:"Паролі не збігаються. Перевір ще раз."};for(const[Ee,je]of Object.entries(yt))k.a.validators.resources[Ee]=je;var _t=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.loading?s("div",{staticClass:"loader-wrap"},[s("svg",{staticClass:"loader",attrs:{viewBox:"0 0 100 100",overflow:"visible"}},[s("g",{staticClass:"core"},[s("circle",{staticClass:"path",attrs:{cx:"50",cy:"50",r:"1",fill:"none"}})]),s("g",{staticClass:"spinner"},[s("circle",{staticClass:"path",attrs:{cx:"50",cy:"50",r:"20",fill:"none"}})])])]):t._e()},Ct=[];let Pt=class extends i["default"]{};Pt=w["a"]([Object(S["b"])({props:{loading:Boolean}})],Pt);var Ot=Pt,Et=Ot,jt=(s("6dcf"),Object(O["a"])(Et,_t,Ct,!1,null,"403eba3d",null)),Tt=jt.exports,$t=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"button",class:t.schema.class,attrs:{"xmlns:v-on":"http://www.w3.org/1999/xhtml","xmlns:v-bind":"http://www.w3.org/1999/xhtml"}},[s("div",{staticClass:"button_wrap"},[s("a",{staticClass:"button_link",attrs:{href:"javascript:void(0)"},on:{click:t.schema.onClick}},[s("div",{staticClass:"button_text"},[t._v(t._s(t.schema.text))])])])])},qt=[];let kt=class extends i["default"]{};kt=w["a"]([Object(S["b"])({mixins:[q["abstractField"]]})],kt);var Ht=kt,Lt=Ht,It=(s("a79f"),Object(O["a"])(Lt,$t,qt,!1,null,"3053b88f",null)),At=It.exports,Mt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-builder",attrs:{"xmlns:v-on":"http://www.w3.org/1999/xhtml"}},[s("div",{staticClass:"form-builder_wrap",on:{click:function(e){t.isTouched=!0}}},[s("vue-form-generator",{ref:"form",attrs:{tag:"div",schema:t.formSchema,model:t.model,options:t.formOptions}}),!t.isTouched&&t.formError?s("label",{staticClass:"form-error",domProps:{innerHTML:t._s(t.formError)}}):t._e()],1),t.button?s("div",{staticClass:"button button_submit",class:t.button.class,attrs:{"xmlns:v-on":"http://www.w3.org/1999/xhtml","xmlns:v-bind":"http://www.w3.org/1999/xhtml"}},[s("loader",{attrs:{loading:t.schema.loading}}),s("div",{staticClass:"button_wrap",on:{click:t.submit}},[s("a",{staticClass:"button_link",attrs:{href:"javascript:void(0);"}},[s("div",{staticClass:"button_text"},[t._v(t._s(t.button.text))])])])],1):t._e(),t._t("default")],2)},Rt=[];let Dt=class extends i["default"]{formErrorChange(){this.$data.isTouched=!1}data(){return{button:null,isTouched:!1}}submit(){this.$refs.form.validate()&&(this.$data.isTouched=!1,this.$data.button.submit())}};w["a"]([Object(J["a"])("$props.formError")],Dt.prototype,"formErrorChange",null),Dt=w["a"]([Object(S["b"])({props:{schema:Object,model:Object,formOptions:{type:Object,default:()=>{return H.options()}},formError:{type:String,default:""}},computed:{formSchema(){const t=Object.assign({},this.$props.schema);return t}}})],Dt);var Ut=Dt,Ft=Ut,Wt=(s("45a3"),Object(O["a"])(Ft,Mt,Rt,!1,null,null,null)),Bt=Wt.exports,Xt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"image-worker"},[s("div",{staticClass:"image-worker__navigation"},[s("div",{staticClass:"image-worker__tools"},[s("div",{staticClass:"image-worker__tool"},[s("square-tool")],1),s("div",{staticClass:"image-worker__tool"},[s("point-tool")],1)]),s("div",{staticClass:"image-worker__load-methods"},[s("div",{staticClass:"image-worker__load-method download-field"},[s("input",{staticClass:"download-field__input",attrs:{type:"file",id:"download-field",accept:"image/x-png,image/gif,image/jpeg"},on:{change:t.loadImage}}),s("label",{staticClass:"download-field__label",attrs:{for:"download-field"}},[t._v("Загрузить")])]),s("div",{staticClass:"image-worker__separator"},[t._v("/")]),s("div",{staticClass:"image-worker__load-method",on:{click:t.makeScreen}},[t._v("Сделать скрин")])])]),s("div",{staticClass:"image-worker__canvas"},[s("canvas-module")],1)])},Yt=[],zt=s("c0e9"),Nt=s.n(zt),Vt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"canvas-module",attrs:{id:"bg-canvas-wrap"}},[t.screenSrc?t._e():s("div",{staticClass:"canvas-text"},[t._v("\n        Можешь загрузить видео с устройства, сделать снимок с помощью html2canvas или вставить изображение из буфера.\n    ")]),s("canvas",{ref:"canvas",attrs:{id:"bg-canvas"}})])},Jt=[];let Gt=class extends i["default"]{constructor(){super(...arguments),this.figureCount=0}get screenWidth(){return this.$store.getters.getScreenWidth}get screenHeight(){return this.$store.getters.getScreenHeight}get screenSrc(){return this.$store.getters.getScreenSrc}get screenPoints(){return this.$store.getters.getScreenPoints}get screenSquares(){return this.$store.getters.getScreenSquares}updateImageSrc(){this.setImageToCanvas()}updateScreenSquares(t){t.length&&(t.forEach((t,e)=>{if(!this.context)return;this.context.beginPath(),this.context.lineWidth=1,this.context.strokeStyle="red",this.context.rect(t.beginX-1,t.beginY-1,t.width+2,t.height+2),this.context.fillStyle="rgba(255, 0, 0, 0.05)",this.context.fillRect(t.beginX,t.beginY,t.width,t.height),this.context.stroke();let s=t.width>0?t.beginX:t.beginX+t.width,i=t.height>0?t.beginY:t.beginY+t.height;this.context.font="18px Arial",this.context.fillStyle="red",this.context.fillText(`${++this.figureCount}.`,s+10,i+20)}),this.$store.dispatch(a.clearSquares))}updateScreenPoints(t){if(this.context){if(this.screenPoints.length<6){let t=this.screenPoints[0];if(!t)return;return this.context.beginPath(),this.context.lineWidth=2,this.context.strokeStyle="red",this.context.arc(t.x,t.y,this.context.lineWidth/2,0,2*Math.PI,!0),this.context.closePath(),void this.context.fill()}this.context.beginPath(),this.context.lineWidth=2,this.context.strokeStyle="red",this.context.moveTo(this.screenPoints[0].x,this.screenPoints[0].y);for(var e=1;e<this.screenPoints.length-2;e++){var s=(this.screenPoints[e].x+this.screenPoints[e+1].x)/2,i=(this.screenPoints[e].y+this.screenPoints[e+1].y)/2;this.context.quadraticCurveTo(this.screenPoints[e].x,this.screenPoints[e].y,s,i),this.context.quadraticCurveTo(this.screenPoints[e].x,this.screenPoints[e].y,this.screenPoints[e+1].x,this.screenPoints[e+1].y)}this.context.stroke()}}mounted(){this.setImageToCanvas()}setImageToCanvas(){this.context=this.$refs.canvas.getContext("2d");var t=new Image;t.src=this.screenSrc,t.onload=e=>{let s=this.screenWidth,i=this.screenHeight,r=this.$refs.canvas;r&&this.context&&(r.setAttribute("width",`${s}px`),r.setAttribute("height",`${i}px`),this.context.drawImage(t,0,0,s,i))}}};w["a"]([Object(J["a"])("screenSrc")],Gt.prototype,"updateImageSrc",null),w["a"]([Object(J["a"])("screenSquares")],Gt.prototype,"updateScreenSquares",null),w["a"]([Object(J["a"])("screenPoints")],Gt.prototype,"updateScreenPoints",null),Gt=w["a"]([Object(S["b"])({})],Gt);var Kt=Gt,Qt=Kt,Zt=(s("3686"),s("681c"),Object(O["a"])(Qt,Vt,Jt,!1,null,"34728e61",null)),te=Zt.exports,ee=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"point-tool",class:{"point-tool__active":t.isActive()},on:{click:t.changeTool}},[s("i",{staticClass:"fas fa-pencil-alt"})])},se=[];let ie=class extends i["default"]{constructor(){super(...arguments),this.started=!1}get activeTool(){return this.$store.getters.getScreenActiveTool}get screenHeight(){return this.$store.getters.getScreenHeight}get screenWidth(){return this.$store.getters.getScreenWidth}updateListeners(){this.isActive()?this.setListeners():this.removeListeners()}mounted(){let t=document.getElementById("bg-canvas");if(!t)throw Error("Can't find canvas or canvasWrap element");this.canvas=t,this.isActive()&&this.setListeners()}destroy(){this.removeListeners()}setListeners(){this.canvas&&(this.canvas.addEventListener("mousedown",this.mouseDown,!1),this.canvas.addEventListener("mousemove",this.mouseMove,!1),this.canvas.addEventListener("mouseup",this.mouseUp,!1))}removeListeners(){this.canvas&&(this.canvas.removeEventListener("mousedown",this.mouseDown,!1),this.canvas.removeEventListener("mousemove",this.mouseMove,!1),this.canvas.removeEventListener("mouseup",this.mouseUp,!1))}isActive(){return this.activeTool===o.pencil}changeTool(){this.$store.commit(n.setActiveTool,o.pencil)}mouseDown(t){this.$store.dispatch(a.addPoint,this.getPoint(t)).then(()=>{this.started=!0})}mouseMove(t){this.started&&this.$store.dispatch(a.addPoint,this.getPoint(t)).then(()=>{this.started=!0})}mouseUp(t){this.started&&this.$store.dispatch(a.clearPoints).then(()=>{this.started=!1})}getPoint(t){if(!this.canvas)return;let e=this.canvas.clientHeight,s=this.canvas.clientWidth,i=s/this.screenWidth,r=e/this.screenHeight;return{x:t.offsetX/i,y:t.offsetY/r}}};w["a"]([Object(J["a"])("activeTool")],ie.prototype,"updateListeners",null),ie=w["a"]([Object(S["b"])({})],ie);var re=ie,ne=re,ae=(s("fdba"),Object(O["a"])(ne,ee,se,!1,null,"99f9fad2",null)),oe=ae.exports,ce=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"square-tool",class:{"square-tool__active":t.isActive()},on:{click:t.changeTool}},[s("i",{staticClass:"fas fa-square"})])},le=[];let de=class extends i["default"]{constructor(){super(...arguments),this.beginX=0,this.beginY=0}updateListeners(){this.isActive()?this.setListeners():this.removeListeners()}get activeTool(){return this.$store.getters.getScreenActiveTool}get screenHeight(){return this.$store.getters.getScreenHeight}get screenWidth(){return this.$store.getters.getScreenWidth}mounted(){let t=document.getElementById("bg-canvas");if(!t)throw Error("Can't find canvas or canvasWrap element");this.canvas=t,this.isActive()&&this.setListeners()}destroy(){this.removeListeners()}setListeners(){this.canvas&&(this.canvas.addEventListener("mousedown",this.getBeginCoords,!1),this.canvas.addEventListener("mouseup",this.setSquare,!1))}removeListeners(){this.canvas&&(this.canvas.removeEventListener("mousedown",this.getBeginCoords,!1),this.canvas.removeEventListener("mouseup",this.setSquare,!1))}getBeginCoords(t){this.beginX=t.offsetX,this.beginY=t.offsetY}setSquare(t){let e=this.getScaledCoordinates(this.beginX,this.beginY,t.offsetX,t.offsetY);if(!e)return;let s=e.endX-e.beginX,i=e.endY-e.beginY;if(Math.abs(s)<40||Math.abs(i)<40)return this.beginX=0,void(this.beginY=0);this.$store.dispatch(a.addSquare,{beginX:e.beginX,beginY:e.beginY,width:s,height:i}).then(()=>{this.beginX=0,this.beginY=0})}isActive(){return this.activeTool===o.square}changeTool(){this.$store.commit(n.setActiveTool,o.square)}getScaledCoordinates(t,e,s,i){if(!this.canvas)return;let r=this.canvas.clientHeight,n=this.canvas.clientWidth,a=n/this.screenWidth,o=r/this.screenHeight;return{beginX:t/a,beginY:e/o,endX:s/a,endY:i/o}}};w["a"]([Object(J["a"])("activeTool")],de.prototype,"updateListeners",null),de=w["a"]([Object(S["b"])({})],de);var ue=de,he=ue,me=(s("98c9"),Object(O["a"])(he,ce,le,!1,null,"d7d874e4",null)),ge=me.exports;let pe=class extends i["default"]{mounted(){document.addEventListener("paste",this.getImageFromClipboard)}destroy(){document.removeEventListener("paste",this.getImageFromClipboard)}getImageFromClipboard(t){if(t&&t.clipboardData){var e=t.clipboardData.items;for(let t in e){let i=e[t];if("file"===i.kind){var s=i.getAsFile();this.loadImageFromReader(s)}}}}makeScreen(){const t=document.querySelector("body");t&&(this.$modal.hide("bug-report-tool"),setTimeout(()=>{let e={x:window.scrollX,y:window.scrollY,width:window.innerWidth,height:window.innerHeight};Nt()(t,e).then(t=>{this.$store.commit(n.setWidth,t.width),this.$store.commit(n.setHeight,t.height),t.toBlob(t=>{let e=window.URL||window.webkitURL;this.$store.dispatch(a.setSrc,e.createObjectURL(t)),this.$modal.show("bug-report-tool")})})},100))}loadImageFromReader(t){let e=new FileReader;e.readAsDataURL(t),e.onload=e=>fetch(e.target.result).then(t=>t.blob()).then(e=>{let s=window.URL||window.webkitURL,i=s.createObjectURL(e),r=window.URL||window.webkitURL,o=new Image;o.onload=t=>{let e=t.target.width,s=t.target.height;this.$store.commit(n.setWidth,e),this.$store.commit(n.setHeight,s),this.$store.dispatch(a.setSrc,i)},o.src=r.createObjectURL(t)})}loadImage(t){let e=t.target.files[0];e&&this.loadImageFromReader(e)}};pe=w["a"]([Object(S["b"])({mixins:[q["abstractField"]],components:{"canvas-module":te,"point-tool":oe,"square-tool":ge}})],pe);var fe=pe,ve=fe,be=(s("b7d9"),s("1ac0"),s("dd55"),Object(O["a"])(ve,Xt,Yt,!1,null,"38726866",null)),we=be.exports,Se=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.fields.length?s("div",{staticClass:"dynamic-fields-list"},t._l(t.fields,function(e){return s("div",{key:"field.index",staticClass:"dynamic-fields-list__field"},[s("label",[t._v(t._s(e.label))]),s("input",{attrs:{type:"text",placeholder:e.label},on:{input:function(s){t.changeValue(s.target.value,e.index)}}})])}),0):t._e()},xe=[];let ye=class extends i["default"]{constructor(){super(...arguments),this.fields=[]}countUpdateS(){this.getFields()}changeValue(t,e){let s={value:t,index:e},i=Object.assign([],this.value),r=i.findIndex(t=>t.index===e);-1!==r&&i.splice(r,1),i.push(s),this.value=i,this.$props.model[this.$props.schema.model]=i}mounted(){this.getFields()}getFields(){let t=[];for(let e=0;e<this.$props.schema.count;e++)t.push({index:e,label:`${this.$props.schema.text} №${e+1}`});this.fields=t}};w["a"]([Object(J["a"])("schema")],ye.prototype,"countUpdateS",null),ye=w["a"]([Object(S["b"])({mixins:[q["abstractField"]]})],ye);var _e=ye,Ce=_e,Pe=(s("8dee"),Object(O["a"])(Ce,Se,xe,!1,null,"4119f8ed",null)),Oe=Pe.exports;i["default"].use(wt.a),i["default"].use(xt.a),i["default"].use(k.a),i["default"].component("loader",Tt),i["default"].component("fieldCbutton",At),i["default"].component("form-builder",Bt),i["default"].component("fieldImageWorker",we),i["default"].component("fieldDynamicFieldsList",Oe),i["default"].config.productionTip=!1,new i["default"]({store:f,render:t=>t(vt)}).$mount("#app")},cd8d:function(t,e,s){},d83e:function(t,e,s){},d8fd:function(t,e,s){},dd55:function(t,e,s){"use strict";var i=s("6ae3"),r=s.n(i);r.a},e157:function(t,e,s){},e5d6:function(t,e,s){"use strict";var i=s("a1e4"),r=s.n(i);r.a},f769:function(t,e,s){},fdba:function(t,e,s){"use strict";var i=s("42c7"),r=s.n(i);r.a}});
//# sourceMappingURL=app.js.map
