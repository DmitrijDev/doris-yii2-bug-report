(function(t){function e(e){for(var i,o,a=e[0],c=e[1],l=e[2],u=0,h=[];u<a.length;u++)o=a[u],n[o]&&h.push(n[o][0]),n[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);d&&d(e);while(h.length)h.shift()();return r.push.apply(r,l||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],i=!0,a=1;a<s.length;a++){var c=s[a];0!==n[c]&&(i=!1)}i&&(r.splice(e--,1),t=o(o.s=s[0]))}return t}var i={},n={app:0},r=[];function o(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=i,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(s,i,function(e){return t[e]}.bind(null,i));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/assets/assets/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var d=c;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("cd49")},"0fe1":function(t,e,s){},"131f":function(t,e,s){},"15bb":function(t,e,s){"use strict";var i=s("0fe1"),n=s.n(i);n.a},"1ac0":function(t,e,s){"use strict";var i=s("9e37"),n=s.n(i);n.a},"1e8b":function(t,e){},3253:function(t,e,s){},3686:function(t,e,s){"use strict";var i=s("f769"),n=s.n(i);n.a},"42c7":function(t,e,s){},"45a3":function(t,e,s){"use strict";var i=s("7122"),n=s.n(i);n.a},"4deb":function(t,e,s){},"681c":function(t,e,s){"use strict";var i=s("cd8d"),n=s.n(i);n.a},"6ae3":function(t,e,s){},"6dcf":function(t,e,s){"use strict";var i=s("a13b"),n=s.n(i);n.a},7122:function(t,e,s){},"79d6":function(t,e,s){"use strict";var i=s("4deb"),n=s.n(i);n.a},8753:function(t,e,s){},"8dee":function(t,e,s){"use strict";var i=s("d8fd"),n=s.n(i);n.a},"97fb":function(t,e,s){"use strict";var i=s("131f"),n=s.n(i);n.a},"98c9":function(t,e,s){"use strict";var i=s("b3cc"),n=s.n(i);n.a},"9e37":function(t,e,s){},a13b:function(t,e,s){},a1e4:function(t,e,s){},a79f:function(t,e,s){"use strict";var i=s("8753"),n=s.n(i);n.a},b3cc:function(t,e,s){},b7d9:function(t,e,s){"use strict";var i=s("3253"),n=s.n(i);n.a},c1c3:function(t,e,s){},c253:function(t,e,s){"use strict";var i=s("e157"),n=s.n(i);n.a},c553:function(t,e,s){"use strict";var i=s("d83e"),n=s.n(i);n.a},cd49:function(t,e,s){"use strict";s.r(e);var i=s("2b0e"),n=s("2f62");const r={setSrc:"setSrc",setWidth:"setWidth",setHeight:"setHeight",setPoints:"setPoints",setSquares:"setSquares",setActiveTool:"setActiveTool",setHistoryPoints:"setHistoryPoints",setHistorySquares:"setHistorySquares"},o={setSrc:"setSrc",addPoint:"addPoint",addSquare:"addSquare",clearPoints:"clearPoints",clearSquares:"clearSquares",clearHistoryPoints:"clearHistoryPoints",clearHistorySquares:"clearHistorySquares"};var a;(function(t){t[t["circle"]=0]="circle",t[t["square"]=1]="square",t[t["pencil"]=2]="pencil"})(a||(a={}));let c={src:"",width:0,heigth:0,points:[],squares:[],historyPoints:[],historySquares:[],activeTool:a.pencil};var l={state:c,mutations:{[r.setWidth]:(t,e)=>{t.width=e},[r.setHeight]:(t,e)=>{t.heigth=e},[r.setSrc]:(t,e)=>{t.src=e},[r.setPoints]:(t,e)=>{t.points=e},[r.setSquares]:(t,e)=>{t.squares=e},[r.setHistorySquares]:(t,e)=>{t.historySquares=e},[r.setHistoryPoints]:(t,e)=>{t.historyPoints=e},[r.setActiveTool]:(t,e)=>{t.activeTool=e}},getters:{getScreenSrc:t=>t.src,getScreenWidth:t=>t.width,getScreenHeight:t=>t.heigth,getScreenPoints:t=>t.points,getScreenSquares:t=>t.squares,getScreenActiveTool:t=>t.activeTool,getScreenHistoryPoints:t=>t.historyPoints,getScreenHistorySquares:t=>t.historySquares},actions:{[o.addPoint]:(t,e)=>{return new Promise(s=>{let i=t.state.points.concat([e]);t.commit(r.setPoints,i);let n=t.state.historyPoints.concat([e]);t.commit(r.setHistoryPoints,n),s()})},[o.setSrc]:(t,e)=>{return new Promise(s=>{t.commit(r.setSrc,e),Promise.all([t.dispatch(o.clearPoints),t.dispatch(o.clearSquares),t.dispatch(o.clearHistoryPoints),t.dispatch(o.clearHistorySquares)]).then(()=>{s()})})},[o.addSquare]:(t,e)=>{return new Promise(s=>{let i=t.state.squares.concat([e]);t.commit(r.setSquares,i);let n=t.state.historySquares.concat([e]);t.commit(r.setHistorySquares,n),s()})},[o.clearPoints]:t=>{return new Promise(e=>{t.commit(r.setPoints,[]),e()})},[o.clearSquares]:t=>{return new Promise(e=>{t.commit(r.setSquares,[]),e()})},[o.clearHistoryPoints]:t=>{return new Promise(e=>{t.commit(r.setHistoryPoints,[]),e()})},[o.clearHistorySquares]:t=>{return new Promise(e=>{t.commit(r.setHistorySquares,[]),e()})}}};i["default"].use(n["a"]);const d=new n["a"].Store({modules:{screen:l}});var u=d,h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"app"},[s("modal",{staticClass:"bug-report-tool-modal",attrs:{name:"bug-report-tool",width:"100%",height:"100%"},on:{closed:t.cleanStore}},[s("bug-report-tool")],1),s("notifications",{attrs:{group:"success-message"}}),s("application-navigation")],1)},m=[],g=s("9ab4"),f=s("2fe1"),p=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"application-navigation"},[s("div",{staticClass:"application-navigation__buttons"},[s("i",{staticClass:"application-navigation__button fas fa-camera",on:{click:t.showCanvasModal}}),s("i",{staticClass:"application-navigation__button fas fa-list-ul",on:{click:t.showListMenu}})])])},v=[];let b=class extends i["default"]{showCanvasModal(){this.$modal.show("bug-report-tool")}showListMenu(){}};b=g["a"]([Object(f["b"])({})],b);var w=b,S=w,x=(s("c253"),s("2877")),y=Object(x["a"])(S,p,v,!1,null,"94c3d0c2",null),_=y.exports,C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bug-report-tool"},[s("loader",{attrs:{loading:t.loading}}),Object.keys(t.schema).length?s("form-builder",{ref:"form",attrs:{schema:t.schema,model:t.model,"form-error":t.formError}}):t._e()],1)},P=[],E=s("4309"),O=s.n(E);const T={options:t=>{return Object.assign({validateAfterLoad:!1,validateAfterChanged:!0},t)},description:(t="description",e={})=>{return Object.assign({type:"textArea",model:t,max:2e3,min:20,required:!0,validator:E["validators"].string},e)},submit:(t,e={})=>{return Object.assign({type:"submit",buttonText:"Отправить",validateBeforeSubmit:!0,onSubmit:t},e)},button:(t,e,s={})=>{return Object.assign({type:"cbutton",text:t,onClick:e,class:"button__orange"},s)},imageWorker:(t={})=>{return Object.assign({model:"image",type:"image-worker"},t)},dynamicFieldList:(t,e=0,s={})=>{return Object.assign({model:t,type:"dynamic-fields-list",text:"Описание бага",count:e},s)}};var $=s("4a35");class j{}class q extends j{constructor(t){super(),this.meta=t.meta,this.image=t.image,this.description=t.description,t.errors&&(this.errors=t.errors)}}const H={controller:"bugReport",sufix:"/"};var L=H,k=s("bc3a"),A=s.n(k),I=s("7317"),M=s.n(I);class R{post(t,e=null){let s=this.getCSRFToken();s&&Object.assign(e,s);let i=M()(e);return this.send(t,R.POST_METHOD,{data:i})}get(t,e=null){let s=this.getCSRFToken();return s&&Object.assign(e,s),this.send(t,R.GET_METHOD,{params:e})}put(t,e=null){let s=this.getCSRFToken();return s&&Object.assign(e,s),this.send(t,R.PUT_METHOD,{data:e})}delete(t,e=null){let s=this.getCSRFToken();return s&&Object.assign(e,s),this.send(t,R.DELETE_METHOD,{data:e})}send(t,e,s){return new Promise((i,n)=>{let r=`/${L.controller}/${t}${L.sufix}`,o={headers:{"Content-Type":"post"===e?"multipart/form-data;charset=UTF-8":"applocation/json;charset=UTF-8"},url:r,responseType:"json",method:e};s&&Object.assign(o,s),A()(o).then(t=>{let e=[R.OK,R.CREATED,R.DELETED];if(e.some(e=>t.status===e))return console.log("lol"),void i(t.data);n(t.data)}).then(t=>{n(t.data)}).catch(t=>{let e=t.response,s=e.status;s&&s===R.UNAUTHORIZED&&n({code:s,message:"Авторизуйся і спробуйте ще раз."});let i=t.response.message;i||(i=t.response.data.message),i||(i=t.response.data[0].message),i||(i="Виникла помилка. Повторіть спробу пізніше."),n({code:s,message:i})})})}getCSRFToken(){let t=document.querySelector('meta[name="csrf-token"]'),e=document.querySelector('meta[name="csrf-param"]');return t&&e?{[e.content]:t.content}:null}}R.OK=200,R.CREATED=201,R.DELETED=204,R.BAD_REQUEST=400,R.UNAUTHORIZED=401,R.FORBIDDEN=403,R.NOT_FOUND=404,R.VALIDATION_FAILED=422,R.INTERNAL_SERVER_ERROR=500,R.SERVICE_UNAVAILABLE=503,R.POST_METHOD="post",R.GET_METHOD="get",R.PUT_METHOD="put",R.DELETE_METHOD="delete";var D=new R;class F{getAll(t){return new Promise((e,s)=>{const i=t?t.getProps():{};D.get(this.action,i).then(t=>{e(this.createCollection(t))},s)})}create(t={}){return new Promise((e,s)=>{D.post(this.action,t).then(t=>{e(this.createModel(t))},s)})}update(t,e){return new Promise((s,i)=>{D.put(`${this.action}/${t}`,e).then(t=>{s(this.createModel(t))},i)})}deleteById(t){return new Promise((e,s)=>{D.delete(`${this.action}/${t}`).then(e,s)})}deleteByAttributes(t){return new Promise((e,s)=>{D.delete(this.action,t.getProps()).then(e,s)})}findById(t,e){return new Promise((s,i)=>{const n=e?e.getProps():{};D.get(`${this.action}/${t}`,n).then(t=>{try{s(this.createModel(t))}catch(e){i()}},i)})}findByAttributes(t){return new Promise((e,s)=>{D.get(this.action,t.getProps()).then(t=>{e(this.createCollection(t))},s)})}}class W{constructor(){this.entities=[]}setEntity(t){this.entities.push(this.createModel(t))}setEntities(t){this.entities=this.entities.map(t=>{return this.createModel(t)})}isEmpty(){return!this.entities.length}getEntities(){return this.entities}}class U extends W{createModel(t){return new q(t)}}class X extends F{constructor(){super(...arguments),this.action="issue"}createModel(t){return new q(t)}createCollection(t){let e=new U;return e.setEntities(t),e}}var Y=s("60a3");let B=class extends i["default"]{constructor(){super(...arguments),this.formError="",this.count=0,this.loading=!1,this.model={description:"",errors:[]}}get screenHistorySquares(){return this.$store.getters.getScreenHistorySquares}updateSchema(){this.generateSchema()}beforeMount(){this.generateSchema()}generateSchema(){let t=[T.description("description",{label:"Описание ошибки",placeholder:"Описание ошибки"}),T.submit(this.submitForm)];this.screenHistorySquares.length&&t.unshift(T.dynamicFieldList("errors",this.screenHistorySquares.length)),this.schema={groups:[{legend:"Image",styleClasses:"form-custom-group image-worker",fields:[T.imageWorker()]},{legend:"Description",styleClasses:"form-custom-group description",fields:t}],loading:!1},this.$forceUpdate()}submitForm(){let t=document.getElementById("bg-canvas");t&&(this.loading=!0,t.toBlob(t=>{const e=Object($["detect"])();if(!e||!t)return;let s=new File([t],"image.png"),i={description:this.model.description,image:s,meta:{href:window.location.href,viewportHeight:window.innerHeight,viewportWidth:window.innerWidth,scrollX:window.scrollX,scrollY:window.scrollY,browser:e.name,browserVersion:e.version,os:e.os,source:window.navigator.userAgent}};if(console.log(this.model.errors),this.model.errors.length){let t={};this.model.errors.forEach(e=>{t[e.index.toString()]=e}),console.log(t),i.errors=t}let n=new q(i),r=new X;r.create(n).then(t=>{this.$modal.hide("bug-report-tool"),this.$notify({group:"success-message",type:"success",title:"Успех!",text:`Правка "${this.model.description.trim()}" была успешно сохранена!`}),this.loading=!1},t=>{this.formError=t.message,this.loading=!1})}))}};g["a"]([Object(Y["a"])("screenHistorySquares")],B.prototype,"updateSchema",null),B=g["a"]([Object(f["b"])({})],B);var N=B,V=N,G=(s("97fb"),s("15bb"),Object(x["a"])(V,C,P,!1,null,"1a764acc",null)),J=G.exports;let K=class extends i["default"]{showModal(){this.$modal.show("bug-report-tool")}cleanStore(){this.$store.dispatch(o.setSrc,"")}beforeMount(){let t=["Q".charCodeAt(0),"W".charCodeAt(0),"E".charCodeAt(0)],e={};document.onkeydown=s=>{s=s||window.event,Object.assign(e,{[s.keyCode]:!0});for(var i=0;i<t.length;i++)if(!e[t[i]])return;e={},this.showModal()},document.onkeyup=function(t){t=t||window.event,delete e[t.keyCode]}}};K=g["a"]([Object(f["b"])({components:{"application-navigation":_,"bug-report-tool":J}})],K);var Q=K,Z=Q,z=(s("c553"),s("e5d6"),s("79d6"),Object(x["a"])(Z,h,m,!1,null,"9311ca78",null)),tt=z.exports,et=s("1881"),st=s.n(et),it=(s("92bd"),s("ee98")),nt=s.n(it);s("c1c3"),s("1e8b");const rt={fieldIsRequired:"Поле обов'язкове для заповнення",invalidFormat:"Невірний формат данних",fieldIsPasswords:"Значення в полях мають співпадати",numberTooSmall:"Число занадто мале. Мінімум:&nbsp;{0}",numberTooBig:"Число занадто велике. Максимум:&nbsp;{0}",invalidNumber:"Невірне число",invalidInteger:"Поле має містити лише цифри",textTooSmall:"Поле має містити мінімум {1} символи",textTooBig:"Поле має містити не більше ніж {1} символів.Довжина тексту занадто велика",thisNotText:"Це не текст",thisNotArray:"Це не массив",currentDateError:"Зазначена дата некоректна",selectMinItems:"Оберіть щонайменше {0} елементів",selectMaxItems:"Оберіть щонайбільше {0} елементів",invalidDate:"Обрана дата некоректна",dateIsEarly:"Обрана дата некоректна. Обрана:&nbsp;{0}, мінімальна:&nbsp;{1}",dateIsLate:"Обрана дата некоректна. Обрана:&nbsp;{0}, максимальна:&nbsp;{1}",invalidEmail:"Неправильний формат електронної адреси",invalidURL:"Невірно вказана адресса",invalidCard:"Невірно вказаний номер карти",invalidCardNumber:"Невірно вказаний номер карти",invalidTextContainNumber:"Невірно вказаний текст. Текст не може містити числа або спеціальні символи",invalidTextContainSpec:"Невірно вказаний текст. Текст не може містити спеціальні символи",requirePassword:"Паролі не збігаються. Перевір ще раз."};for(const[de,ue]of Object.entries(rt))O.a.validators.resources[de]=ue;var ot=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.loading?s("div",{staticClass:"loader-wrap"},[s("svg",{staticClass:"loader",attrs:{viewBox:"0 0 100 100",overflow:"visible"}},[s("g",{staticClass:"core"},[s("circle",{staticClass:"path",attrs:{cx:"50",cy:"50",r:"1",fill:"none"}})]),s("g",{staticClass:"spinner"},[s("circle",{staticClass:"path",attrs:{cx:"50",cy:"50",r:"20",fill:"none"}})])])]):t._e()},at=[];let ct=class extends i["default"]{};ct=g["a"]([Object(f["b"])({props:{loading:Boolean}})],ct);var lt=ct,dt=lt,ut=(s("6dcf"),Object(x["a"])(dt,ot,at,!1,null,"403eba3d",null)),ht=ut.exports,mt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"button",class:t.schema.class,attrs:{"xmlns:v-on":"http://www.w3.org/1999/xhtml","xmlns:v-bind":"http://www.w3.org/1999/xhtml"}},[s("div",{staticClass:"button_wrap"},[s("a",{staticClass:"button_link",attrs:{href:"javascript:void(0)"},on:{click:t.schema.onClick}},[s("div",{staticClass:"button_text"},[t._v(t._s(t.schema.text))])])])])},gt=[];let ft=class extends i["default"]{};ft=g["a"]([Object(f["b"])({mixins:[E["abstractField"]]})],ft);var pt=ft,vt=pt,bt=(s("a79f"),Object(x["a"])(vt,mt,gt,!1,null,"3053b88f",null)),wt=bt.exports,St=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-builder",attrs:{"xmlns:v-on":"http://www.w3.org/1999/xhtml"}},[s("div",{staticClass:"form-builder_wrap",on:{click:function(e){t.isTouched=!0}}},[s("vue-form-generator",{ref:"form",attrs:{tag:"div",schema:t.formSchema,model:t.model,options:t.formOptions}}),!t.isTouched&&t.formError?s("label",{staticClass:"form-error",domProps:{innerHTML:t._s(t.formError)}}):t._e()],1),t.button?s("div",{staticClass:"button button_submit",class:t.button.class,attrs:{"xmlns:v-on":"http://www.w3.org/1999/xhtml","xmlns:v-bind":"http://www.w3.org/1999/xhtml"}},[s("loader",{attrs:{loading:t.schema.loading}}),s("div",{staticClass:"button_wrap",on:{click:t.submit}},[s("a",{staticClass:"button_link",attrs:{href:"javascript:void(0);"}},[s("div",{staticClass:"button_text"},[t._v(t._s(t.button.text))])])])],1):t._e(),t._t("default")],2)},xt=[];let yt=class extends i["default"]{formErrorChange(){this.$data.isTouched=!1}data(){return{button:null,isTouched:!1}}submit(){this.$refs.form.validate()&&(this.$data.isTouched=!1,this.$data.button.submit())}};g["a"]([Object(Y["a"])("$props.formError")],yt.prototype,"formErrorChange",null),yt=g["a"]([Object(f["b"])({props:{schema:Object,model:Object,formOptions:{type:Object,default:()=>{return T.options()}},formError:{type:String,default:""}},computed:{formSchema(){const t=Object.assign({},this.$props.schema);return t}}})],yt);var _t=yt,Ct=_t,Pt=(s("45a3"),Object(x["a"])(Ct,St,xt,!1,null,null,null)),Et=Pt.exports,Ot=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"image-worker"},[s("div",{staticClass:"image-worker__navigation"},[s("div",{staticClass:"image-worker__tools"},[s("div",{staticClass:"image-worker__tool"},[s("square-tool")],1),s("div",{staticClass:"image-worker__tool"},[s("point-tool")],1)]),s("div",{staticClass:"image-worker__load-methods"},[s("div",{staticClass:"image-worker__load-method download-field"},[s("input",{staticClass:"download-field__input",attrs:{type:"file",id:"download-field",accept:"image/x-png,image/gif,image/jpeg"},on:{change:t.loadImage}}),s("label",{staticClass:"download-field__label",attrs:{for:"download-field"}},[t._v("Загрузить")])]),s("div",{staticClass:"image-worker__separator"},[t._v("/")]),s("div",{staticClass:"image-worker__load-method",on:{click:t.makeScreen}},[t._v("Сделать скрин")])])]),s("div",{staticClass:"image-worker__canvas"},[s("canvas-module")],1)])},Tt=[],$t=s("c0e9"),jt=s.n($t),qt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"canvas-module",attrs:{id:"bg-canvas-wrap"}},[t.screenSrc?t._e():s("div",{staticClass:"canvas-text"},[t._v("\n        Можешь загрузить видео с устройства, сделать снимок с помощью html2canvas или вставить изображение из буфера.\n    ")]),s("canvas",{ref:"canvas",attrs:{id:"bg-canvas"}})])},Ht=[];let Lt=class extends i["default"]{constructor(){super(...arguments),this.figureCount=0}get screenWidth(){return this.$store.getters.getScreenWidth}get screenHeight(){return this.$store.getters.getScreenHeight}get screenSrc(){return this.$store.getters.getScreenSrc}get screenPoints(){return this.$store.getters.getScreenPoints}get screenSquares(){return this.$store.getters.getScreenSquares}updateImageSrc(){this.setImageToCanvas()}updateScreenSquares(t){t.length&&(t.forEach((t,e)=>{if(!this.context)return;this.context.beginPath(),this.context.lineWidth=1,this.context.strokeStyle="red",this.context.rect(t.beginX-1,t.beginY-1,t.width+2,t.height+2),this.context.fillStyle="rgba(255, 0, 0, 0.05)",this.context.fillRect(t.beginX,t.beginY,t.width,t.height),this.context.stroke();let s=t.width>0?t.beginX:t.beginX+t.width,i=t.height>0?t.beginY:t.beginY+t.height;this.context.font="18px Arial",this.context.fillStyle="red",this.context.fillText(`${++this.figureCount}.`,s+10,i+20)}),this.$store.dispatch(o.clearSquares))}updateScreenPoints(t){if(this.context){if(this.screenPoints.length<6){let t=this.screenPoints[0];if(!t)return;return this.context.beginPath(),this.context.lineWidth=2,this.context.strokeStyle="red",this.context.arc(t.x,t.y,this.context.lineWidth/2,0,2*Math.PI,!0),this.context.closePath(),void this.context.fill()}this.context.beginPath(),this.context.lineWidth=2,this.context.strokeStyle="red",this.context.moveTo(this.screenPoints[0].x,this.screenPoints[0].y);for(var e=1;e<this.screenPoints.length-2;e++){var s=(this.screenPoints[e].x+this.screenPoints[e+1].x)/2,i=(this.screenPoints[e].y+this.screenPoints[e+1].y)/2;this.context.quadraticCurveTo(this.screenPoints[e].x,this.screenPoints[e].y,s,i),this.context.quadraticCurveTo(this.screenPoints[e].x,this.screenPoints[e].y,this.screenPoints[e+1].x,this.screenPoints[e+1].y)}this.context.stroke()}}mounted(){this.setImageToCanvas()}setImageToCanvas(){this.context=this.$refs.canvas.getContext("2d");var t=new Image;t.src=this.screenSrc,t.onload=e=>{let s=this.screenWidth,i=this.screenHeight,n=this.$refs.canvas;n&&this.context&&(n.setAttribute("width",`${s}px`),n.setAttribute("height",`${i}px`),this.context.drawImage(t,0,0,s,i))}}};g["a"]([Object(Y["a"])("screenSrc")],Lt.prototype,"updateImageSrc",null),g["a"]([Object(Y["a"])("screenSquares")],Lt.prototype,"updateScreenSquares",null),g["a"]([Object(Y["a"])("screenPoints")],Lt.prototype,"updateScreenPoints",null),Lt=g["a"]([Object(f["b"])({})],Lt);var kt=Lt,At=kt,It=(s("3686"),s("681c"),Object(x["a"])(At,qt,Ht,!1,null,"34728e61",null)),Mt=It.exports,Rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"point-tool",class:{"point-tool__active":t.isActive()},on:{click:t.changeTool}},[s("i",{staticClass:"fas fa-pencil-alt"})])},Dt=[];let Ft=class extends i["default"]{constructor(){super(...arguments),this.started=!1}get activeTool(){return this.$store.getters.getScreenActiveTool}get screenHeight(){return this.$store.getters.getScreenHeight}get screenWidth(){return this.$store.getters.getScreenWidth}updateListeners(){this.isActive()?this.setListeners():this.removeListeners()}mounted(){let t=document.getElementById("bg-canvas");if(!t)throw Error("Can't find canvas or canvasWrap element");this.canvas=t,this.isActive()&&this.setListeners()}destroy(){this.removeListeners()}setListeners(){this.canvas&&(this.canvas.addEventListener("mousedown",this.mouseDown,!1),this.canvas.addEventListener("mousemove",this.mouseMove,!1),this.canvas.addEventListener("mouseup",this.mouseUp,!1))}removeListeners(){this.canvas&&(this.canvas.removeEventListener("mousedown",this.mouseDown,!1),this.canvas.removeEventListener("mousemove",this.mouseMove,!1),this.canvas.removeEventListener("mouseup",this.mouseUp,!1))}isActive(){return this.activeTool===a.pencil}changeTool(){this.$store.commit(r.setActiveTool,a.pencil)}mouseDown(t){this.$store.dispatch(o.addPoint,this.getPoint(t)).then(()=>{this.started=!0})}mouseMove(t){this.started&&this.$store.dispatch(o.addPoint,this.getPoint(t)).then(()=>{this.started=!0})}mouseUp(t){this.started&&this.$store.dispatch(o.clearPoints).then(()=>{this.started=!1})}getPoint(t){if(!this.canvas)return;let e=this.canvas.clientHeight,s=this.canvas.clientWidth,i=s/this.screenWidth,n=e/this.screenHeight;return{x:t.offsetX/i,y:t.offsetY/n}}};g["a"]([Object(Y["a"])("activeTool")],Ft.prototype,"updateListeners",null),Ft=g["a"]([Object(f["b"])({})],Ft);var Wt=Ft,Ut=Wt,Xt=(s("fdba"),Object(x["a"])(Ut,Rt,Dt,!1,null,"99f9fad2",null)),Yt=Xt.exports,Bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"square-tool",class:{"square-tool__active":t.isActive()},on:{click:t.changeTool}},[s("i",{staticClass:"fas fa-square"})])},Nt=[];let Vt=class extends i["default"]{constructor(){super(...arguments),this.beginX=0,this.beginY=0}updateListeners(){this.isActive()?this.setListeners():this.removeListeners()}get activeTool(){return this.$store.getters.getScreenActiveTool}get screenHeight(){return this.$store.getters.getScreenHeight}get screenWidth(){return this.$store.getters.getScreenWidth}mounted(){let t=document.getElementById("bg-canvas");if(!t)throw Error("Can't find canvas or canvasWrap element");this.canvas=t,this.isActive()&&this.setListeners()}destroy(){this.removeListeners()}setListeners(){this.canvas&&(this.canvas.addEventListener("mousedown",this.getBeginCoords,!1),this.canvas.addEventListener("mouseup",this.setSquare,!1))}removeListeners(){this.canvas&&(this.canvas.removeEventListener("mousedown",this.getBeginCoords,!1),this.canvas.removeEventListener("mouseup",this.setSquare,!1))}getBeginCoords(t){this.beginX=t.offsetX,this.beginY=t.offsetY}setSquare(t){let e=this.getScaledCoordinates(this.beginX,this.beginY,t.offsetX,t.offsetY);if(!e)return;let s=e.endX-e.beginX,i=e.endY-e.beginY;if(Math.abs(s)<40||Math.abs(i)<40)return this.beginX=0,void(this.beginY=0);this.$store.dispatch(o.addSquare,{beginX:e.beginX,beginY:e.beginY,width:s,height:i}).then(()=>{this.beginX=0,this.beginY=0})}isActive(){return this.activeTool===a.square}changeTool(){this.$store.commit(r.setActiveTool,a.square)}getScaledCoordinates(t,e,s,i){if(!this.canvas)return;let n=this.canvas.clientHeight,r=this.canvas.clientWidth,o=r/this.screenWidth,a=n/this.screenHeight;return{beginX:t/o,beginY:e/a,endX:s/o,endY:i/a}}};g["a"]([Object(Y["a"])("activeTool")],Vt.prototype,"updateListeners",null),Vt=g["a"]([Object(f["b"])({})],Vt);var Gt=Vt,Jt=Gt,Kt=(s("98c9"),Object(x["a"])(Jt,Bt,Nt,!1,null,"d7d874e4",null)),Qt=Kt.exports;let Zt=class extends i["default"]{mounted(){document.addEventListener("paste",this.getImageFromClipboard)}destroy(){document.removeEventListener("paste",this.getImageFromClipboard)}getImageFromClipboard(t){if(t&&t.clipboardData){var e=t.clipboardData.items;for(let t in e){let i=e[t];if("file"===i.kind){var s=i.getAsFile();this.loadImageFromReader(s)}}}}makeScreen(){const t=document.querySelector("body");t&&(this.$modal.hide("bug-report-tool"),setTimeout(()=>{let e={x:window.scrollX,y:window.scrollY,width:window.innerWidth,height:window.innerHeight};jt()(t,e).then(t=>{this.$store.commit(r.setWidth,t.width),this.$store.commit(r.setHeight,t.height),t.toBlob(t=>{let e=window.URL||window.webkitURL;this.$store.dispatch(o.setSrc,e.createObjectURL(t)),this.$modal.show("bug-report-tool")})})},100))}loadImageFromReader(t){let e=new FileReader;e.readAsDataURL(t),e.onload=e=>fetch(e.target.result).then(t=>t.blob()).then(e=>{let s=window.URL||window.webkitURL,i=s.createObjectURL(e),n=window.URL||window.webkitURL,a=new Image;a.onload=t=>{let e=t.target.width,s=t.target.height;this.$store.commit(r.setWidth,e),this.$store.commit(r.setHeight,s),this.$store.dispatch(o.setSrc,i)},a.src=n.createObjectURL(t)})}loadImage(t){let e=t.target.files[0];e&&this.loadImageFromReader(e)}};Zt=g["a"]([Object(f["b"])({mixins:[E["abstractField"]],components:{"canvas-module":Mt,"point-tool":Yt,"square-tool":Qt}})],Zt);var zt=Zt,te=zt,ee=(s("b7d9"),s("1ac0"),s("dd55"),Object(x["a"])(te,Ot,Tt,!1,null,"38726866",null)),se=ee.exports,ie=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.fields.length?s("div",{staticClass:"dynamic-fields-list"},t._l(t.fields,function(e){return s("div",{key:"field.index",staticClass:"dynamic-fields-list__field"},[s("label",[t._v(t._s(e.label))]),s("input",{attrs:{type:"text",placeholder:e.label},on:{input:function(s){t.changeValue(s.target.value,e.index)}}})])}),0):t._e()},ne=[];let re=class extends i["default"]{constructor(){super(...arguments),this.fields=[]}countUpdateS(){this.getFields()}changeValue(t,e){let s={value:t,index:e},i=Object.assign([],this.value),n=i.findIndex(t=>t.index===e);-1!==n&&i.splice(n,1),i.push(s),this.value=i,this.$props.model[this.$props.schema.model]=i}mounted(){this.getFields()}getFields(){let t=[];for(let e=0;e<this.$props.schema.count;e++)t.push({index:e,label:`${this.$props.schema.text} №${e+1}`});this.fields=t}};g["a"]([Object(Y["a"])("schema")],re.prototype,"countUpdateS",null),re=g["a"]([Object(f["b"])({mixins:[E["abstractField"]]})],re);var oe=re,ae=oe,ce=(s("8dee"),Object(x["a"])(ae,ie,ne,!1,null,"4119f8ed",null)),le=ce.exports;i["default"].use(st.a),i["default"].use(nt.a),i["default"].use(O.a),i["default"].component("loader",ht),i["default"].component("fieldCbutton",wt),i["default"].component("form-builder",Et),i["default"].component("fieldImageWorker",se),i["default"].component("fieldDynamicFieldsList",le),i["default"].config.productionTip=!1,new i["default"]({store:u,render:t=>t(tt)}).$mount("#app")},cd8d:function(t,e,s){},d83e:function(t,e,s){},d8fd:function(t,e,s){},dd55:function(t,e,s){"use strict";var i=s("6ae3"),n=s.n(i);n.a},e157:function(t,e,s){},e5d6:function(t,e,s){"use strict";var i=s("a1e4"),n=s.n(i);n.a},f769:function(t,e,s){},fdba:function(t,e,s){"use strict";var i=s("42c7"),n=s.n(i);n.a}});
//# sourceMappingURL=app.js.map